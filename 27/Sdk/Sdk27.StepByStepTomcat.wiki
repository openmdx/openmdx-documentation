= openMDX SDK 2.7 for ''Tomcat + OpenEJB'' Step-by-Step Guide =

This guide explains how to install, setup and deploy the examples of ''openMDX SDK 2.7'' on ''Tomcat + OpenEJB''.

In this guide we use ''Apache Tomcat 6'' and ''Apache OpenEJB'' to deploy the sample applications. To make life easier for you, ''openMDX'' provides an installer which you can download from [https://sourceforge.net/projects/openmdx/files/ here]:

 * ''TomcatOpenEJB-2.7.0-windows-installer.exe'' for ''Windows''
 * ''TomcatOpenEJB-2.7.0-linux-installer.bin'' for ''Linux''

However, if you prefer you can deploy the applications also on any other ''J2EE'' Application Server.

'''IMPORTANT:''' This guide assumes that the ''openMDX SDK 2.7'' projects are successfully setup as described in [wiki:Sdk27.StepByStepAnt openMDX SDK 2.7 for Ant Step-by-Step].

Open a shell and go to the directory ''.\openmdxSdk-2.7.0''. Set the environment by executing ''setenv.bat'' in Windows platforms and ''setenv.sh'' on Unix platforms.

Then go to the directory ''.\openmdxSdk-2.7.0\openmdx-example-2.7.0\helloworld''. Run the command ''ant assemble''. This builds the ''EARs'' which we will deploy on ''Tomcat + OpenEJB''. The console output looks as shown below.

[[Image(Sdk27.StepByStepTomcat.pic090.png)]]

The generated ''EAR'' is located in the directory ''.\openmdxSdk-2.7.0\openmdx-example-2.7.0\jre-1.5\helloworld\deployment-unit''. Copy the file ''openmdx-helloworld.ear'' to the directory ''.\TomcatOpenEJB-6.0.26\apache-tomcat-6\apps'' as shown below:

[[Image(Sdk27.StepByStepTomcat.pic100.png)]]

Next we have to add the user ''guest'' to the ''tomcat-user.xml'' which allows us to login to the ''helloworld'' application. Open the file ''.\TomcatOpenEJB-6.0.26\apache-tomcat-6\conf\tomcat-users.xml''. Add a new entry for the user ''guest'' (if does not already exist) and add the role ''openMDXUser'' as shown below.

[[Image(Sdk27.StepByStepTomcat.pic120.png)]]

Finally start ''Tomcat + OpenEJB'' by clicking the ''Start Tomcat + OpenEJB'' shortcut. This starts ''Tomcat + OpenEJB'' and deploys the application ''helloworld''. The console output should look as shown below.

[[Image(Sdk27.StepByStepTomcat.pic130.png)]]

Next click in the ''Login Tomcat + OpenEJB'' shortcut. This launches a browser with the ''Tomcat + OpenEJB'' main URL. Complete the URL by adding ''openmdx-helloworld''/. This opens the ''helloworld'' login page. Enter the user ''guest'' and the password which you have defined in the ''tomcat-users.xml''.

[[Image(Sdk27.StepByStepTomcat.pic140.png)]]

The main page of the ''helloworld'' application is shown after successful login. The GUI of the ''helloworld'' application uses the generic ''openMDX/Portal'' GUI. The GUI is not customized, that's why labels and icons do not look very user-friendly. However, the GUI is fully workable.

[[Image(Sdk27.StepByStepTomcat.pic150.png)]]

In order to test the ''sayHello()'' operation, go to the menu ''Pane:Op:90000'' and select the menu entry ''Pane:Op:Tab:sayHello'' as shown below:

[[Image(Sdk27.StepByStepTomcat.pic160.png)]]

The ''sayHello()'' operation takes as parameter the language which makes ''helloworld'' to return a language-specific ''Say Hello'' text. Enter one of the languages ''de'', ''en'' or ''fr'' and click ''OK''.

[[Image(Sdk27.StepByStepTomcat.pic170.png)]]

The GUI invokes the operation ''sayHello()'' which returns the ''Say Hello'' message as result which is shown below:

[[Image(Sdk27.StepByStepTomcat.pic180.png)]]

Stop ''Tomcat'' by clicking on the ''Stop Tomcat + OpenEJB'' shortcut.

In a next step we will build and deploy the ''workshop'' application. Go back to the shell and change to the directory ''.\openmdxSdk-2.7.0\openmdx-example-2.7.0\workshop''. Run the command ''ant assemble''.

[[Image(Sdk27.StepByStepTomcat.pic190.png)]]

Next copy the EAR ''openmdx-example-workshop.ear'' from the directory ''.\openmdxSdk-2.7.0\openmdx-example-2.7.0\jre-1.5\workshop\deployment-unit'' to the directory ''.\TomcatOpenEJB-6.0.26\apache-tomcat-6\apps'' as shown below:

[[Image(Sdk27.StepByStepTomcat.pic200.png)]]

Because the ''workshop'' example accesses a database we have to add a JDBC datasource configuration to the ''OpenEJB'' configuration ''openejb.xml''. Open the file ''.\openmdxSdk-2.7.0\openmdx-example-2.7.0\workshop\src\connector\openejb-3\openejb.xml'' and copy/paste the configuration entry into the file ''.\TomcatOpenEJB-6.0.26\apache-tomcat-6\conf\openejb.xml'' as shown below:

[[Image(Sdk27.StepByStepTomcat.pic210.png)]]

Compare the contents of your ''apps'' directory with the directory structure shown below:

[[Image(Sdk27.StepByStepTomcat.pic230.png)]]

Before restarting ''Tomcat + OpenEJB'' clean the contents of the directory ''work'' and ''temp''. This makes sure that we do not deploy old files.

Start ''Tomcat + OpenEJB'' by clicking on the ''Start Tomcat + OpenEJB'' shortcut.

[[Image(Sdk27.StepByStepTomcat.pic250.png)]]

Launch a browser, complete the URL with the suffix ''openmdx-workshop''/ and login as ''guest'':

[[Image(Sdk27.StepByStepTomcat.pic260.png)]]

Next you should see the main page of the workshop application:

[[Image(Sdk27.StepByStepTomcat.pic290.png)]]

The project comes with some basic customizing. E.g. it comes with a wizard which can be launched from the menu item ''Wizards > Create New Project...''. A wizard is a user-defined GUI extension. Wizards are a powerful and flexbile way to extend the standard ''openMDX/Portal GUI''. Wizards are implemented as standard ''JSPs'' and as such have access to the full functionality of the application's API. The source code of the wizard is located in the directory ''.\openmdxSdk-2.7.0\openmdx-example-2.7.0\workshop\src\data\org.openmdx.example\wizards\en_US''.

[[Image(Sdk27.StepByStepTomcat.pic300.png)]]

Before we can use the wizard we have to create the team member ''The Boss''. In the tab ''Team Members'' select ''New > Team Member'' and fill out the form as shown below:

[[Image(Sdk27.StepByStepTomcat.pic310.png)]]

Next launch the wizard. Enter values for project name, project manager and project tasks and click OK. After successful completion the wizards returns to the standard GUI which displays the newly created objects.

[[Image(Sdk27.StepByStepTomcat.pic320.png)]]

== Congratulations ==
Congratulations! You have successfully built and deployed the ''openMDX SDK 2.7'' projects on ''Tomcat + OpenEJB''.